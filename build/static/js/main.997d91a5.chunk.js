(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{164:function(e,t,a){},259:function(e,t,a){e.exports=a(580)},266:function(e,t,a){},274:function(e,t,a){},275:function(e,t,a){},294:function(e,t,a){},567:function(e,t){},579:function(e,t,a){},580:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(29),o=a.n(s),i=(a(162),a(264),a(265),a(266),a(9)),l=a(10),c=a(12),u=a(11),m=a(13),p=a(258),h=a(7),f=a(2),d="https://match-server.herokuapp.com/",g=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={activeIndex:0},a.next=a.next.bind(Object(h.a)(a)),a.previous=a.previous.bind(Object(h.a)(a)),a.onExiting=a.onExiting.bind(Object(h.a)(a)),a.onExited=a.onExited.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.setState({items:this.props.profile.gallery})}},{key:"onExiting",value:function(){this.animating=!0}},{key:"onExited",value:function(){this.animating=!1}},{key:"next",value:function(){if(!this.animating){var e=this.state.activeIndex===this.state.items.length-1?0:this.state.activeIndex+1;this.setState({activeIndex:e})}}},{key:"previous",value:function(){if(!this.animating){var e=0===this.state.activeIndex?this.state.items.length-1:this.state.activeIndex-1;this.setState({activeIndex:e})}}},{key:"render",value:function(){var e=this,t=this.state.activeIndex,a=this.state.items.map(function(t){return r.a.createElement(f.h,{className:"custom-tag text-center",onExiting:e.onExiting,onExited:e.onExited,key:t},r.a.createElement("img",{src:d+t,alt:t,style:{width:"auto",height:"300px"}}))});return r.a.createElement("div",null,r.a.createElement("style",null,".custom-tag {                                \n            background: linear-gradient(262deg, #ff7854, #fd267d);\n          }"),r.a.createElement(f.f,{activeIndex:t,next:this.next,previous:this.previous},a,r.a.createElement(f.g,{direction:"prev",directionText:"Previous",onClickHandler:this.previous}),r.a.createElement(f.g,{direction:"next",directionText:"Next",onClickHandler:this.next})),r.a.createElement(f.u,null,this.props.profile?r.a.createElement("div",null,r.a.createElement("header",{style:{textAlign:"center"}},r.a.createElement("h3",null,this.props.profile.firstname," ",this.props.profile.lastname,","," ",this.props.profile.age),r.a.createElement("h6",null,this.props.profile.fame,"% / ",this.props.profile.distance," ","miles")),r.a.createElement("h6",{style:{display:"flex"}},Object.keys(this.props.profile.tags).map(function(t,a){return e.props.profile.tags[t]?r.a.createElement("p",{style:{fontStyle:"italic",display:"flex",flexDirection:"row",justifyContent:"center",width:"100%",padding:"0",listStyle:"none"},key:a},t):""})),r.a.createElement("p",{style:{textAlign:"center"}},this.props.profile.biography,r.a.createElement("br",null),r.a.createElement("small",null,"last login : ",this.props.profile.last_login)),r.a.createElement(f.C,{className:"row justify-content-center"},!0===this.props.like?r.a.createElement("span",{onClick:function(){e.props.postFavorite([JSON.parse(localStorage.creds).username,e.props.profile.username])},className:"col-auto fa fa-heart fa-lg mouseover",style:{color:"#E91E63"}}):"")):"egweg"))}}]),t}(n.Component),E=a(63),v=a(5),y=(a(274),a(275),function(e){var t=e.genre,a=e.genres,n=e.onGenreChange;return r.a.createElement("div",{className:"selection",style:{alignItems:"center"}},r.a.createElement("label",null,"Sort By"),r.a.createElement("select",{value:t,onChange:n},a.map(function(e){return r.a.createElement("option",{value:e.name,key:e.id},e.name)})))}),b=a(251),O=a.n(b),k=(a(293),a(294),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){a.props.onChange({type:a.props.data.label,value:e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.data,t=e.min,a=e.max,n=e.step,s=e.value,o=e.label;return r.a.createElement("div",{className:"slider"},r.a.createElement("label",null,o),r.a.createElement(O.a,{minValue:t,maxValue:a,step:n,onChange:this.onChange,value:s}))}}]),t}(r.a.Component)),N=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.comtags,a=e.genre,n=e.genres,s=e.onGenreChange,o=e.onChange,i=e.age,l=e.fame,c=e.distance;return r.a.createElement("section",{className:"navigation"},r.a.createElement(k,{data:i,onChange:o}),r.a.createElement(k,{data:l,onChange:o}),r.a.createElement(k,{data:c,onChange:o}),r.a.createElement(k,{data:t,onChange:o}),r.a.createElement(y,{genre:a,genres:n,onGenreChange:s}))}}]),t}(r.a.Component),j=(a(164),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onGenreChange=function(e){a.setState({genre:e.target.value})},a.setGenres=function(e){a.setState({genres:e})},a.onChange=function(e){a.setState(Object(E.a)({},e.type,Object(v.a)({},a.state[e.type],{value:e.value})))},a.state={},a.toggle=a.toggle.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.setState(Object(v.a)({},this.props.filter,{dropdownOpen:!1}))}},{key:"handleSubmit",value:function(){0===localStorage.length?alert("Login First"):(this.props.fetchFilter(this.state),this.props.fetchUsers(Object(v.a)({},this.state,{username:JSON.parse(localStorage.creds).username,likelist:this.props.likelist.like})))}},{key:"toggle",value:function(){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container",style:{margin:"10px"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(f.k,{isOpen:this.state.dropdownOpen,toggle:this.toggle},r.a.createElement(f.m,{color:"warning"},"Filter / Sort"),r.a.createElement(f.l,{className:"text-center"},r.a.createElement("section",{className:"slider",style:{display:"flex"}},r.a.createElement(N,Object.assign({onChange:this.onChange,onGenreChange:this.onGenreChange},this.state))),r.a.createElement(f.a,{color:"warning",style:{marginTop:"0px"},onClick:function(t){e.handleSubmit()}},"Confirm"))))))}}]),t}(n.Component)),S=function(){return r.a.createElement("div",{className:"col-12"},r.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-5x fa-fw"}),r.a.createElement("p",null,"Loading . . ."))},w=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).postBlacklist=function(e){if(localStorage.creds)return alert("User ".concat(e," is reported as fake account.")),fetch(d+"users/add/blacklist?user=".concat(e)).then(function(e){return e.json()}).then(function(e){console.log("Blaklist Added",e),window.location.reload()}).catch(function(e){return console.log(e)});alert("You need to log on first")},a.state={isModalOpen:!1},a.toggleModal=a.toggleModal.bind(Object(h.a)(a)),a.postBlacklist=a.postBlacklist.bind(Object(h.a)(a)),a.checkProfile=a.checkProfile.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"checkProfile",value:function(){0!==localStorage.length&&fetch(d+"users/add/profile",{method:"POST",body:JSON.stringify({user:JSON.parse(localStorage.creds).username,data:this.props.user.username}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){console.log(e.message)})}},{key:"toggleModal",value:function(){this.setState({isModalOpen:!this.state.isModalOpen})}},{key:"reportUser",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(f.b,{style:{maxWidth:"250px"}},r.a.createElement(f.d,{className:"mouseover img-responsive",style:{objectFit:"cover"},height:"300px",overflow:"hidden",src:d+this.props.user.profile,alt:this.props.user.username,onClick:function(t){t.preventDefault(),e.checkProfile(),e.toggleModal()}}),r.a.createElement(f.c,null,r.a.createElement(f.e,{className:"row justify-content-center"},r.a.createElement("span",{className:"col-auto"},this.props.user.username,"% / ",this.props.user.age,"y"),r.a.createElement("span",{onClick:function(t){t.preventDefault(),e.props.postFavorite([e.props.username,e.props.user.username])},className:"col-auto fa fa-heart fa-lg mouseover",style:{color:"#E91E63"}}),null===this.props.user.last_login?r.a.createElement("span",{className:"col-auto fa fa-exclamation-circle fa-lg mouseover",onClick:function(){window.confirm("Are you sure you report this user as fake user?")&&e.postBlacklist(e.props.user.username)}}):""))),r.a.createElement(f.t,{isOpen:this.state.isModalOpen,toggle:this.toggleModal},r.a.createElement(f.v,{toggle:this.toggleModal},"Profile"),r.a.createElement(g,{profile:this.props.user,postFavorite:this.props.postFavorite,like:!0})))}}]),t}(n.Component),C=function(e){var t=0===e.users.users.length?r.a.createElement("h1",null,"Result has not found"):e.users.users.map(function(t){return void 0!==t&&null!==t?r.a.createElement("div",{key:t._id,className:"col-auto mx-auto col-md-6 col-lg-4 my-1"},r.a.createElement(w,{user:t,postFavorite:e.postFavorite,postBlacklist:e.postBlacklist,username:e.username})):""});return e.users.isLoading?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(S,null))):e.users.errMess?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h4",null,e.users.errMess))):r.a.createElement("div",{className:"container"},r.a.createElement(j,{filter:e.filter,fetchUsers:e.fetchUsers,likelist:e.likelist,fetchFilter:e.fetchFilter}),r.a.createElement("div",{className:"row"},t))},x=a(26),L=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"column is-3"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-image"},r.a.createElement("figure",{className:"image is-4by3"},r.a.createElement("img",{alt:this.props.alt,src:this.props.src}))),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("p",{className:"title is-4"},new Date(this.props.date).toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})))))))}}]),t}(r.a.Component),F=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={profile:null,gallery:[],images:null},a.onFormSubmit=a.onFormSubmit.bind(Object(h.a)(a)),a.onChangeProfile=a.onChangeProfile.bind(Object(h.a)(a)),a.onChangeGallery=a.onChangeGallery.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.setState({images:this.props.gallery}),console.log(JSON.stringify(this.props))}},{key:"onFormSubmit",value:function(e){e.preventDefault(),this.fileUpload()}},{key:"onChangeProfile",value:function(e){this.setState({profile:e.target.files[0]}),console.log(e.target.files[0]),e.preventDefault()}},{key:"onChangeGallery",value:function(e){this.setState({gallery:e.target.files}),console.log(this.state),e.preventDefault()}},{key:"fileUpload",value:function(){for(var e=new FormData,t=0;t<this.state.gallery.length;t++)e.append("gallery",this.state.gallery[t]);e.append("profile",this.state.profile),e.append("username",this.props.username),console.log(this.state),fetch(d+"image",{mode:"no-cors",method:"POST",body:e}).then(function(e){return console.log(JSON.stringify(e))}).then(function(){return window.location.href="localhost:3001/home"})}},{key:"render",value:function(){var e,t=this;return e=this.state.images!==[]&&this.state.images&&this.state.images.length>0?this.state.images.map(function(e){return r.a.createElement(L,{key:t.state.images.indexOf(e),alt:e,src:d+e,date:e.replace("images/edgar2","").replace(".png","")})}):r.a.createElement("h2",{className:"subtitle"},"No images :("),r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container  is-fluid"},r.a.createElement("h1",{className:"title"},"Photo Gallery"),r.a.createElement("div",{className:"file is-info has-name is-fullwidth"},r.a.createElement("label",{className:"file-label"},r.a.createElement("input",{className:"file-input",type:"file",name:"profile",onChange:this.onChangeProfile}),"Profile",r.a.createElement("input",{className:"file-input",type:"file",name:"gallery",multiple:!0,onChange:this.onChangeGallery}),"Gallery",r.a.createElement("span",null))),r.a.createElement("br",null),r.a.createElement("button",{className:"button is-primary",onClick:this.onFormSubmit,type:"submit"},"Upload")),r.a.createElement("hr",null),r.a.createElement("div",{className:"container is-fluid"},r.a.createElement("div",{className:"columns is-multiline"},e)))}}]),t}(r.a.Component),I=a(79),M=a(81);a(230).config();var A=function(e){return e&&e.length},D=function(e){return function(t){return!t||t.length<=e}},T=function(e){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)},U=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={hideGPS:!1},a.tagClick=a.tagClick.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.setState(Object(v.a)({},this.props.info))}},{key:"hideGps",value:function(){var e=this;fetch("https://api.ipify.org?format=json").then(function(e){return e.json()}).then(function(t){fetch("https://ipinfo.io/".concat(t.ip,"/json?token=1f700d00426ba7")).then(function(e){return e.json()}).then(function(t){var a=t.loc.split(",");e.setState({gps:{lat:a[0],lng:a[1]},hideGps:!0})}).catch(function(e){return console.log(e)})})}},{key:"tagClick",value:function(e){this.setState({tags:Object(v.a)({},this.state.tags,Object(E.a)({},e,!this.state.tags[e]))})}},{key:"getCurrentLocation",value:function(e){var t=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){t.setState({gps:{lat:e.coords.latitude,lng:e.coords.longitude},hideGps:!1})}):(fetch("https://jsonip.com").then(function(e){fetch("https://ipinfo.io/".concat(e.ip,"/json?token=1f700d00426ba7")).then(function(e){return console.log(e)})}),alert("Geolocation is not supported by this browser.")),e.preventDefault()}},{key:"handleSubmit",value:function(e){console.log(e),this.props.postFeedback(Object(v.a)({},e,{tags:this.state.tags,username:this.props.info.username,gps:this.state.gps}))}},{key:"render",value:function(){var e,t=this,a=Object(I.compose)(Object(I.withProps)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(Object({NODE_ENV:"production",PUBLIC_URL:"//match-client"}).MAP_API,"&v=3.exp&libraries=geometry,drawing,places"),loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})}),M.withScriptjs,M.withGoogleMap)(function(){return r.a.createElement(M.GoogleMap,{defaultZoom:14,defaultCenter:t.state.gps,onClick:function(e){console.log("t.latlng"+JSON.stringify(e.latLng)),t.setState({gps:e.latLng})}},r.a.createElement(M.Marker,{position:t.state.gps}))}),n=this.state.tags?Object.keys(this.state.tags).map(function(e){return r.a.createElement(f.a,{style:{margin:"5px"},key:e,className:"col-sm-2",outline:!0,color:"primary",active:t.state.tags[e],onClick:function(){t.tagClick(e)}},e)}):"";return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"Edit your Info"))),r.a.createElement("div",{className:"col-12 col-md-9"},r.a.createElement(x.Form,{model:"feedback",onSubmit:function(e){return t.handleSubmit(e)}},r.a.createElement(f.C,null,r.a.createElement(f.r,{htmlFor:"prefer",md:2},"Location"),void 0!==this.state.gps&&!1===this.state.hideGps?r.a.createElement(f.i,{md:10},r.a.createElement(a,null)):"",r.a.createElement(f.i,{md:{size:10,offset:2}},r.a.createElement(f.a,{style:{margin:"10px"},color:"primary",size:"lg",block:!0,onClick:function(e){return t.getCurrentLocation(e)}},"Get location"),r.a.createElement(f.a,{style:{margin:"10px"},color:"primary",size:"lg",block:!0,onClick:function(){t.hideGps()}},"Hide Location"))),r.a.createElement(f.C,{className:"form-group"},r.a.createElement(f.r,{htmlFor:"firstname",md:2},"First Name"),r.a.createElement(f.i,{md:10},r.a.createElement(x.Control.text,{model:".firstname",id:"firstname",name:"firstname",placeholder:"First Name",className:"form-control",defaultValue:this.state.firstname,validators:{required:A,minLength:(e=3,function(t){return t&&t.length>=e}),maxLength:D(15)}}),r.a.createElement(x.Errors,{className:"text-danger",model:".firstname",show:"touched",messages:{required:"Required",minLength:"Must be greater than 2 characters",maxLength:"Must be 15 characters or less"}}))),r.a.createElement(f.C,{className:"form-group"},r.a.createElement(f.r,{htmlFor:"lastname",md:2},"Last Name"),r.a.createElement(f.i,{md:10},r.a.createElement(x.Control.text,{model:".lastname",id:"lastname",name:"lastname",placeholder:"Last Name",className:"form-control",defaultValue:this.state.lastname}))),r.a.createElement(f.C,{className:"form-group"},r.a.createElement(f.r,{htmlFor:"gender",md:2},"Gender"),r.a.createElement(f.i,{md:10},r.a.createElement(x.Control.select,{model:".gender",id:"gender",name:"gender",defaultValue:this.state.gender,className:"form-control"},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"male"},"male"),r.a.createElement("option",{value:"female"},"female")))),r.a.createElement(f.C,{className:"form-group"},r.a.createElement(f.r,{htmlFor:"prefer",md:2},"Preference"),r.a.createElement(f.i,{md:10},r.a.createElement(x.Control.select,{model:".prefer",id:"prefer",name:"prefer",defaultValue:this.state.prefer,className:"form-control"},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"male"},"male"),r.a.createElement("option",{value:"female"},"female"),r.a.createElement("option",{value:"bi"},"Bi-sexual")))),r.a.createElement(f.C,{className:"form-group"},r.a.createElement(f.r,{htmlFor:"age",md:2},"Age"),r.a.createElement(f.i,{md:10},r.a.createElement(x.Control,{model:".age",id:"age",name:"age",defaultValue:this.state.age,className:"form-control"}))),r.a.createElement(f.C,null,r.a.createElement(f.r,{htmlFor:"tags",md:2},"Tags"),r.a.createElement(f.i,{md:10},n)),r.a.createElement(f.C,{className:"form-group"},r.a.createElement(f.r,{htmlFor:"email",md:2},"Email"),r.a.createElement(f.i,{md:10},r.a.createElement(x.Control.text,{model:".email",id:"email",name:"email",placeholder:"Email",className:"form-control",defaultValue:this.state.email,validators:{required:A,validEmail:T}}),r.a.createElement(x.Errors,{className:"text-danger",model:".email",show:"touched",messages:{required:"Required",validEmail:"Invalid Email Address"}}))),r.a.createElement(f.C,{className:"form-group"},r.a.createElement(f.r,{htmlFor:"biography",md:2},"Biography"),r.a.createElement(f.i,{md:10},r.a.createElement(x.Control.textarea,{model:".biography",id:"biography",name:"biography",rows:"12",className:"form-control",defaultValue:this.state.biography}))),r.a.createElement(f.C,{className:"form-group"},r.a.createElement(f.i,{md:{size:10,offset:2}},r.a.createElement(f.a,{type:"submit",color:"primary"},"Confirm"))),r.a.createElement(F,{gallery:null!==this.props.info?this.props.info.gallery:null,username:null!==this.props.info?this.props.info.username:""}))))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).fetchProfile=function(e){return fetch(d+"users/edit/".concat(e)).then(function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t},function(e){throw new Error(e.message)}).then(function(e){return e.json()}).then(function(e){console.log("Profile: "+JSON.stringify(e)),a.setState({profile:e}),a.toggleModal()}).catch(function(e){return console.log(e.message)})},a.state={isModalOpen:!1,profile:null},a.toggleModal=a.toggleModal.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){this.setState({profile:this.props.profile})}},{key:"toggleModal",value:function(){this.setState({isModalOpen:!this.state.isModalOpen})}},{key:"RenderNoti",value:function(e){var t=this,a=e.unread?"#76FF03":"";return r.a.createElement("div",{className:"card",style:{borderColor:a},onClick:function(a){e.unread&&t.props.checkNoti(t.props.noti._id,e.date),a.preventDefault()}},r.a.createElement(f.s,{tag:"li"},r.a.createElement(f.s,{left:!0,middle:!0},r.a.createElement(f.s,{style:{height:"100px"},object:!0,src:d+e.image,alt:e.from})),r.a.createElement(f.s,{body:!0,className:"ml-5"},r.a.createElement(f.s,{heading:!0},e.from),r.a.createElement("p",null,e.type),r.a.createElement("span",{className:"col-auto fa fa-address-card fa-lg",style:{color:"#6A1B9A"},onClick:function(a){t.fetchProfile(e.from),a.preventDefault()}}))))}},{key:"render",value:function(){var e=this,t=null!==this.props.noti&&0!==this.props.noti.comments.length?this.props.noti.comments.map(function(t){return r.a.createElement("div",{key:e.props.noti.comments.indexOf(t),className:"col-12 mt-5"},e.RenderNoti(t))}):r.a.createElement("h1",{className:"text-center",style:{margin:"40px"}},"No notification");return r.a.createElement("div",null,t,r.a.createElement("div",null,r.a.createElement(f.t,{isOpen:this.state.isModalOpen,toggle:this.toggleModal},r.a.createElement(f.v,{toggle:this.toggleModal},"Profile"),r.a.createElement(g,{profile:this.state.profile,postFavorite:this.props.postFavorite}))))}}]),t}(n.Component),G=a(27),P=a(80),R=a.n(P),J=R()(d+"noti"),W=R()(d+"chatnoti"),B=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={username:null,isNavOpen:!1,isModalOpen:!1,isSignupOpen:!1,chatrooms:null},a.toggleNav=a.toggleNav.bind(Object(h.a)(a)),a.toggleModal=a.toggleModal.bind(Object(h.a)(a)),a.toggleSignup=a.toggleSignup.bind(Object(h.a)(a)),a.handleSignup=a.handleSignup.bind(Object(h.a)(a)),a.handleLogin=a.handleLogin.bind(Object(h.a)(a)),a.handleLogout=a.handleLogout.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.auth.isAuthenticated){var t=this.props.auth.user.username;J.on(t,function(t){alert(t),e.props.fetchNoties(JSON.parse(localStorage.creds).username)})}}},{key:"componentWillReceiveProps",value:function(){var e=this;if(null===this.state.chatrooms&&null!==this.props.chatrooms&&void 0!==this.props.chatrooms){var t=Object.values(this.props.chatrooms);this.setState({chatrooms:t}),localStorage.setItem("chatrooms",t);var a=this.props.auth.user.username;W.on(a,function(a){"false"===localStorage.inChatroom&&e.props.fetchUchat(t)})}}},{key:"componentWillUnmount",value:function(){}},{key:"toggleNav",value:function(){this.setState({isNavOpen:!this.state.isNavOpen})}},{key:"toggleModal",value:function(){this.setState({isModalOpen:!this.state.isModalOpen})}},{key:"toggleSignup",value:function(){this.setState({isSignupOpen:!this.state.isSignupOpen})}},{key:"handleLogin",value:function(e){this.toggleModal(),this.props.loginUser({username:this.username.value,password:this.password.value}),e.preventDefault()}},{key:"handleSignup",value:function(e){this.toggleSignup(),this.props.registerUser({username:this.username.value,password:this.password.value,firstname:this.firstname.value,lastname:this.lastname.value,email:this.email.value}),e.preventDefault()}},{key:"handleLogout",value:function(){J.removeAllListeners(),W.removeAllListeners(),this.props.logoutUser()}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.z,{dark:!0,expand:"md"},r.a.createElement("div",{className:"container"},r.a.createElement(f.B,{onClick:this.toggleNav}),r.a.createElement(f.A,{className:"mr-auto",href:"/"},r.a.createElement("img",{src:"assets/images/logo.png",height:"30",width:"41",alt:"Match"}),r.a.createElement(G.b,{className:"nav-link",to:"/home"})),r.a.createElement(f.j,{isOpen:this.state.isNavOpen,navbar:!0},r.a.createElement(f.w,{navbar:!0},r.a.createElement(f.x,null,r.a.createElement(G.b,{className:"nav-link",to:"/menu"},r.a.createElement("span",{className:"fa fa-heart fa-lg"})," Connected",r.a.createElement("span",{className:"badge badge-danger"},0!==this.props.uchats?this.props.uchats:""))),r.a.createElement(f.x,null,r.a.createElement(G.b,{className:"nav-link",to:"/chat"},r.a.createElement("span",{className:"fa fa-bell fa-lg"})," Notifications",r.a.createElement("span",{className:"badge badge-danger"},0!==this.props.unread?this.props.unread:""))),r.a.createElement(f.x,null,r.a.createElement(G.b,{className:"nav-link",to:"/contactus"},r.a.createElement("span",{className:"fa fa-address-card fa-lg"})," Profile"))),r.a.createElement(f.w,{className:"ml-auto",navbar:!0},r.a.createElement(f.x,null,this.props.auth.isAuthenticated?r.a.createElement("div",null,r.a.createElement("div",{className:"navbar-text mr-3"},this.props.auth.user.username),r.a.createElement(f.a,{outline:!0,onClick:this.handleLogout},r.a.createElement("span",{className:"fa fa-sign-out fa-lg"})," Logout",this.props.auth.isFetching?r.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-fw"}):null)):r.a.createElement("div",null,r.a.createElement(f.a,{outline:!0,onClick:this.toggleModal,style:{margin:"10px",color:"#ffc107",borderColor:"transparent"}},r.a.createElement("span",{className:"fa fa-sign-in fa-lg"})," Login",this.props.auth.isFetching?r.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-fw"}):null),r.a.createElement(f.a,{outline:!0,onClick:this.toggleSignup,style:{margin:"10px",color:"#ffc107",borderColor:"transparent"}},r.a.createElement("span",{className:"fa fa-sign-in fa-lg"})," Signup",this.props.auth.isFetching?r.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-fw"}):null))))))),r.a.createElement(f.q,{className:"d-none d-md-block"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row row-header"},r.a.createElement("div",{className:"col-12 col-sm-6"},r.a.createElement(G.b,{className:"nav-link",to:"/home",style:{color:"floralwhite"}},r.a.createElement("h1",null,"42 Match"),r.a.createElement("p",null,"Wanna Have Fun?!")))))),r.a.createElement(f.t,{isOpen:this.state.isModalOpen,toggle:this.toggleModal},r.a.createElement(f.v,{toggle:this.toggleModal},"Login"),r.a.createElement(f.u,null,r.a.createElement(f.n,{onSubmit:this.handleLogin},r.a.createElement(f.o,null,r.a.createElement(f.r,{htmlFor:"username"},"Username"),r.a.createElement(f.p,{type:"text",id:"username",name:"username",innerRef:function(t){return e.username=t}})),r.a.createElement(f.o,null,r.a.createElement(f.r,{htmlFor:"password"},"Password"),r.a.createElement(f.p,{type:"password",id:"password",name:"password",innerRef:function(t){return e.password=t}})),r.a.createElement(f.o,{check:!0},r.a.createElement(f.r,{check:!0},r.a.createElement(f.p,{type:"checkbox",name:"remember",innerRef:function(t){return e.remember=t}}),"Remember me")),r.a.createElement(f.a,{type:"submit",value:"submit",color:"primary"},"Login")))),r.a.createElement(f.t,{isOpen:this.state.isSignupOpen,toggle:this.toggleSignup},r.a.createElement(f.v,{toggle:this.toggleSignup},"Signup"),r.a.createElement(f.u,null,r.a.createElement(f.n,{onSubmit:this.handleSignup},r.a.createElement(f.o,null,r.a.createElement(f.r,{htmlFor:"username"},"Username"),r.a.createElement(f.p,{type:"text",id:"username",name:"username",innerRef:function(t){return e.username=t}})),r.a.createElement(f.o,null,r.a.createElement(f.r,{htmlFor:"password"},"Password"),r.a.createElement(f.p,{type:"password",id:"password",name:"password",innerRef:function(t){return e.password=t}})),r.a.createElement(f.o,null,r.a.createElement(f.r,{htmlFor:"username"},"First name"),r.a.createElement(f.p,{type:"text",id:"firstname",name:"fisrtname",innerRef:function(t){return e.firstname=t}})),r.a.createElement(f.o,null,r.a.createElement(f.r,{htmlFor:"username"},"Last name"),r.a.createElement(f.p,{type:"text",id:"lastname",name:"lastname",innerRef:function(t){return e.lastname=t}})),r.a.createElement(f.o,null,r.a.createElement(f.r,{htmlFor:"username"},"email"),r.a.createElement(f.p,{type:"email",id:"email",name:"email",innerRef:function(t){return e.email=t}})),r.a.createElement(f.a,{type:"submit",value:"submit",color:"primary"},"Signup")))))}}]),t}(n.Component),V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).readChat=function(){return fetch(d+"chat/unread?chatId=".concat(a.props.chatId)).then(function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t},function(e){throw new Error(e.message)}).then(function(e){return e.json()}).then(function(e){}).catch(function(e){return console.log(e.message)})},a.state={comments:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"pushChat",value:function(e){return fetch(d+"chat/"+this.props.chatId,{method:"PUT",body:JSON.stringify({from:JSON.parse(localStorage.creds).username,to:this.props.to,message:e}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){}).catch(function(e){console.log(e)})}},{key:"getChat",value:function(){var e=this;return fetch(d+"chat/"+this.props.chatId).then(function(e){return e.json()}).then(function(t){e.setState({comments:t.comments})}).catch(function(e){console.log(e)})}},{key:"componentWillMount",value:function(){console.log("chatId"+this.props.chatId),this.setState({chat:R()(d+"chat")}),this.getChat(),this.readChat(),localStorage.inChatroom=!0}},{key:"componentDidMount",value:function(){var e=this;this.state.chat.on(this.props.chatId,function(t){console.log("chatRoom ".concat(e.props.chatId," data: ").concat(t)),t.split(",")[0]===JSON.parse(localStorage.creds).username&&(console.log("Excute checkUchat"),e.readChat()),e.getChat()})}},{key:"componentWillUnmount",value:function(){this.state.chat.disconnect(),console.log(localStorage.chatrooms.split(",")),this.props.fetchUchat(localStorage.chatrooms.split(",")),localStorage.inChatroom=!1}},{key:"render",value:function(){var e=this,t=this.state.comments.map(function(t){var a="sc-message--content received";return t.to===e.props.to&&(a="sc-message--content sent"),r.a.createElement("div",{key:t.date,className:"sc-message"},r.a.createElement("div",{className:a},r.a.createElement("div",{className:"sc-message--text"},t.message)))});return r.a.createElement(f.u,{className:"sc-chat--window"},r.a.createElement("div",{className:"sc-message-list"},t),r.a.createElement("div",{className:"sc-user-input"},r.a.createElement("input",{id:"chatInput",type:"text",placeholder:"Write message...",className:"sc-user-input--text",onKeyPress:function(t){"Enter"===t.key&&(e.pushChat(t.target.value),document.getElementById("chatInput").value="")},value:this.state.message})))}}]),t}(n.Component),H=a(3),Y=a.n(H),q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).postDislike=function(e){return fetch(d+"users/add/dislike?user=".concat(e[0],"&dislike=").concat(e[1])).then(function(e){console.log("Dislike "+e.json()),window.location.reload()}).catch(function(e){return console.log(e)})},a.state={isModalOpen:!1,isChatOpen:!1},a.toggleModal=a.toggleModal.bind(Object(h.a)(a)),a.toggleChat=a.toggleChat.bind(Object(h.a)(a)),a.postDislike=a.postDislike.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"toggleModal",value:function(){this.setState({isModalOpen:!this.state.isModalOpen})}},{key:"toggleChat",value:function(){this.setState({isChatOpen:!this.state.isChatOpen})}},{key:"render",value:function(){var e=this,t=this.props.user.is_login?"#76FF03":"";return r.a.createElement("div",null,r.a.createElement("style",null),r.a.createElement(f.b,{style:{maxWidth:"250px",borderColor:t}},r.a.createElement(f.d,{className:"mouseover img-responsive",height:"300px",overflow:"hidden",style:{objectFit:"cover"},src:d+this.props.user.profile,alt:this.props.user.username,onClick:function(t){t.preventDefault(),e.toggleModal()}}),r.a.createElement(f.c,null,r.a.createElement(f.e,{className:"row justify-content-center"},r.a.createElement("span",{className:"col-auto"},this.props.user.username),this.props.chatroom?r.a.createElement("span",{className:"col-auto fa fa-comments fa-lg mouseover",onClick:function(t){t.preventDefault(),e.toggleChat()}},r.a.createElement("span",{className:"badge badge-pill badge-danger",style:{height:"21px"}},this.props.uchats&&0!==this.props.uchats[this.props.chatroom]?this.props.uchats[this.props.chatroom]:"")):"",this.props.like?r.a.createElement("span",{onClick:function(t){t.preventDefault(),e.props.postFavorite([JSON.parse(localStorage.creds).username,e.props.user.username])},className:"col-auto fa fa-heart fa-lg mouseover",style:{color:"#E91E63"}}):"",this.props.dislike?r.a.createElement("span",{className:"col-auto fa fa-close fa-lg mouseover",onClick:function(t){t.preventDefault(),e.postDislike([JSON.parse(localStorage.creds).username,e.props.user.username])}}):""))),r.a.createElement(f.t,{isOpen:this.state.isModalOpen,toggle:this.toggleModal},r.a.createElement(f.v,{toggle:this.toggleModal},"Profile"),r.a.createElement(g,{profile:this.props.user,postFavorite:this.props.postFavorite,like:this.props.like})),r.a.createElement(f.t,{isOpen:this.state.isChatOpen,toggle:this.toggleChat},r.a.createElement(f.v,{toggle:this.toggleChat,className:"sc-header"},"Chat"),r.a.createElement(V,{chatId:this.props.chatroom,to:this.props.user.username,fetchUchat:this.props.fetchUchat})))}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).toggle=a.toggle.bind(Object(h.a)(a)),a.state={activeTab:"1"},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"toggle",value:function(e){this.state.activeTab!==e&&this.setState({activeTab:e})}},{key:"render",value:function(){var e=this,t=void 0!==this.props.users.connected?this.props.users.connected.map(function(t){return r.a.createElement("div",{key:t._id,className:"col-9 mx-auto col-md-6 col-lg-4 my-1"},r.a.createElement(q,{user:t,postFavorite:e.props.postFavorite,username:e.props.username,chatroom:e.props.chatrooms[t.username],fetchUchat:e.props.fetchUchat,uchats:e.props.uchats,like:!1,dislike:!0}))}):null,a=void 0!==this.props.users.likedby?this.props.users.likedby.map(function(t){return r.a.createElement("div",{key:t._id,className:"col-9 mx-auto col-md-6 col-lg-4 my-1"},r.a.createElement(q,{user:t,postFavorite:e.props.postFavorite,username:e.props.username,like:!0,dislike:!1}))}):null,n=void 0!==this.props.users.like?this.props.users.like.map(function(t){return r.a.createElement("div",{key:t._id,className:"col-9 mx-auto col-md-6 col-lg-4 my-1"},r.a.createElement(q,{user:t,postFavorite:e.props.postFavorite,username:e.props.username,dislike:!0}))}):null,s=void 0!==this.props.users.checkedby?this.props.users.checkedby.map(function(t){return r.a.createElement("div",{key:t._id,className:"col-9 mx-auto col-md-6 col-lg-4 my-1"},r.a.createElement(q,{user:t,postFavorite:e.props.postFavorite,username:e.props.username,like:!0,dislike:!1}))}):null;return this.props.users.isLoading?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(S,null))):this.props.users.errMess?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h4",null,this.props.users.errMess))):r.a.createElement("div",{className:"container"},r.a.createElement(f.w,{tabs:!0,className:"row"},r.a.createElement(f.x,{className:"col-auto"},r.a.createElement(f.y,{className:Y()({active:"1"===this.state.activeTab}),onClick:function(){e.toggle("1")}},"Connected")),r.a.createElement(f.x,{className:"col-auto"},r.a.createElement(f.y,{className:Y()({active:"2"===this.state.activeTab}),onClick:function(){e.toggle("2")}},"Your fan")),r.a.createElement(f.x,{className:"col-auto"},r.a.createElement(f.y,{className:Y()({active:"3"===this.state.activeTab}),onClick:function(){e.toggle("3")}},"Your Star")),r.a.createElement(f.x,{className:"col-auto"},r.a.createElement(f.y,{className:Y()({active:"4"===this.state.activeTab}),onClick:function(){e.toggle("4")}},"Your stalker"))),r.a.createElement(f.D,{activeTab:this.state.activeTab},r.a.createElement(f.E,{tabId:"1"},r.a.createElement("div",{className:"row"},t)),r.a.createElement(f.E,{tabId:"2"},r.a.createElement("div",{className:"row"},a)),r.a.createElement(f.E,{tabId:"3"},r.a.createElement("div",{className:"row"},n)),r.a.createElement(f.E,{tabId:"4"},r.a.createElement("div",{className:"row"},s))))}}]),t}(n.Component),Q=a(37),Z={username:"",firstname:"",lastname:"",password:"",gender:"",preference:"",email:"",gps:!1,biography:"",age:"",tags:[]},$={genre:"age",genres:[{id:1,name:"age"},{id:2,name:"distance"},{id:3,name:"common tags"},{id:4,name:"ratings"}],age:{label:"age",min:0,max:60,step:1,value:{min:20,max:40}},fame:{label:"fame",min:0,max:100,step:10,value:{min:0,max:100}},distance:{label:"distance",min:0,max:300,step:10,value:{min:0,max:120}},comtags:{label:"comtags",min:0,max:10,step:1,value:{min:0,max:2}},gps:{lat:37.802235,lng:-119.8792},tags:'["tag1", "tag2", "tag3", "tag4"]',prefer:"bi"},K=function(e){return function(t){return t(X(!0)),fetch(d+"users/filtered",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t},function(e){throw new Error(e.message)}).then(function(e){return e.json()}).then(function(e){t(te(e))}).catch(function(e){return t(ee(e.message))})}},X=function(){return{type:"USERS_LOADING"}},ee=function(e){return{type:"USERS_FAILED",payload:e}},te=function(e){return{type:"ADD_USERS",payload:e}},ae=function(){return{type:"INFO_LOADING"}},ne=function(e){return{type:"INFO_FAILED",payload:e}},re=function(e){return{type:"ADD_INFO",payload:e}},se=function(e){return function(t){return t(oe(!0)),fetch(d+"users/lusers",{method:"POST",body:JSON.stringify({connected:e.connected,likedby:e.likedby,checkedby:e.checkedby,like:e.like}),headers:{"Content-Type":"application/json"}}).then(function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t},function(e){throw new Error(e.message)}).then(function(e){return e.json()}).then(function(e){t(le(e))}).catch(function(e){return t(ie(e.message))})}},oe=function(){return{type:"FAVORITES_LOADING"}},ie=function(e){return{type:"FAVORITES_FAILED",payload:e}},le=function(e){return{type:"ADD_FAVORITES",payload:e}},ce=function(){return{type:"NOTIES_LOADING"}},ue=function(e){return{type:"NOTIES_FAILED",payload:e}},me=function(e){return{type:"ADD_NOTIES",payload:e}},pe=function(e){return function(t){return t(he(!0)),fetch(d+"chat/unread",{method:"POST",body:JSON.stringify({username:JSON.parse(localStorage.creds).username,chatIds:e}),headers:{"Content-Type":"application/json"}}).then(function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t},function(e){throw new Error(e.message)}).then(function(e){return e.json()}).then(function(e){Object.values(e).reduce(function(e,t){return e+t},0),e.unread=Object.values(e).reduce(function(e,t){return e+t},0),t(de(e))}).catch(function(e){return t(fe(e.message))})}},he=function(){return{type:"UCHAT_LOADING"}},fe=function(e){return{type:"UCHAT_FAILED",payload:e}},de=function(e){return{type:"ADD_UCHAT",payload:e}},ge=a(160),Ee=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){null!==this.props.auth.user?(this.props.fetchInfo(this.props.auth.user.username),this.props.fetchNoties(this.props.auth.user.username)):this.props.fetchUsers($)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=function(t){var a=t.component,n=Object(p.a)(t,["component"]);return r.a.createElement(G.d,Object.assign({},n,{render:function(t){return e.props.auth.isAuthenticated?r.a.createElement(a,t):r.a.createElement("div",null,alert("Please Log in first"),r.a.createElement(G.c,{to:{pathname:"/home",state:{from:t.location}}}))}}))};return r.a.createElement("div",null,r.a.createElement(B,{auth:this.props.auth,loginUser:this.props.loginUser,logoutUser:this.props.logoutUser,registerUser:this.props.registerUser,unread:!!this.props.noties.noties&&this.props.noties.noties.unread,uchats:this.props.uchats.uchats?this.props.uchats.uchats.unread:null,fetchNoties:this.props.fetchNoties,fetchUchat:this.props.fetchUchat,chatrooms:this.props.info.info?this.props.info.info.chatrooms:null}),r.a.createElement(ge.TransitionGroup,null,r.a.createElement(ge.CSSTransition,{key:this.props.location.key,classNames:"page",timeout:300},r.a.createElement(G.e,null,r.a.createElement(G.d,{exact:!0,path:"/home",component:function(){return r.a.createElement(C,{username:e.props.auth.isAuthenticated?e.props.auth.user.username:null,likelist:e.props.auth.isAuthenticated?e.props.info.info:null,users:e.props.users,postFavorite:e.props.postFavorite,fetchUsers:e.props.fetchUsers,fetchFilter:e.props.fetchFilter,filter:e.props.filter})}}),"} />",r.a.createElement(t,{exact:!0,path:"/menu",component:function(){return r.a.createElement(z,{chatrooms:null!==e.props.info.info?e.props.info.info.chatrooms:null,users:e.props.favorites.favorites,postFavorite:e.props.postFavorite,postDislike:e.props.postDislike,fetchUchat:e.props.fetchUchat,uchats:e.props.uchats.uchats})}}),r.a.createElement(t,{exact:!0,path:"/chat",component:function(){return r.a.createElement(_,{username:e.props.auth.isAuthenticated?e.props.auth.user.username:null,noti:e.props.noties.noties,checkNoti:e.props.checkNoti,fetchProfile:e.props.fetchProfile,postFavorite:e.props.postFavorite})}}),r.a.createElement(t,{exact:!0,path:"/contactus",component:function(){return r.a.createElement(U,{postFeedback:e.props.postFeedback,fetchInfo:e.props.fetchInfo,info:e.props.info.info?e.props.info.info:null})}}),r.a.createElement(G.c,{to:"/home"})))))}}]),t}(n.Component),ve=Object(G.f)(Object(Q.connect)(function(e){return{uchats:e.uchats,noties:e.noties,lusers:e.lusers,users:e.users,info:e.info,favorites:e.favorites,auth:e.auth,filter:e.filter}},function(e){return{postFeedback:function(t){return e(function(e){return function(t){return fetch(d+"users/edit",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){if(console.log("action:"+JSON.stringify(e)),e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t},function(e){throw e}).then(function(e){return e.json()}).then(function(e){console.log("Feedback",e),alert("Thank you for your feedback!\n"+JSON.stringify(e)),t(re(e)),window.location.href="localhost:3001/home"}).catch(function(e){console.log("Feedback",e.message),alert("Your feedback could not be posted\nError: "+e.message)})}}(t))},fetchInfo:function(t){return e(function(e){return function(t,a){return t(ae(!0)),fetch(d+"users/edit/"+e).then(function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t},function(e){throw new Error(e.message)}).then(function(e){return e.json()}).then(function(e){t(se(e)),t(pe(Object.values(e.chatrooms))),t(re(e));var n=a().filter;t(K(Object(v.a)({},n,{username:e.username,likelist:e.like,gps:e.gps,tag:e.tags,prefer:e.prefer})))}).catch(function(e){return t(ne(e.message))})}}(t))},fetchUsers:function(t){return e(K(t))},loginUser:function(t){return e(function(e){return function(t){return t(function(e){return{type:"LOGIN_REQUEST",creds:e}}(e)),console.log("loginUser is excuted"+JSON.stringify(e)),fetch(d+"users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t},function(e){throw e}).then(function(e){return e.json()}).then(function(a){if(console.log("response: "+a),!a.success){var n=new Error(a.status);throw n.response=a,n}localStorage.setItem("token",a.token),localStorage.setItem("creds",JSON.stringify(e)),localStorage.setItem("inChatroom",!1),t(function(e){return{type:"LOGIN_SUCCESS",token:e.token}}(a)),window.location.reload()}).catch(function(e){alert(e.message),t({type:"LOGIN_FAILURE",message:e.message})})}}(t))},registerUser:function(t){return e(function(e){return function(t){return fetch(d+"users/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(console.log("response at top:"+JSON.stringify(e)),e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t},function(e){throw console.log("err at top:"+JSON.stringify(e)),e}).then(function(e){return e.json()}).then(function(e){if(!e.success){var t=new Error("Error "+e.status);throw 11e3===e.err.code?alert("The email address is already exists"):alert(e.err.message),t.response=e.err,t}alert("You are signed up! Verify with your email account!")}).catch(function(e){console.log(e),t({type:"REGISTER_FAILURE",message:e.message})})}}(t))},fetchNoties:function(t){return e((a=t,function(e){return e(ce(!0)),fetch(d+"noti/".concat(a)).then(function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t},function(e){throw new Error(e.message)}).then(function(e){return e.json()}).then(function(t){var a=0;t.comments.forEach(function(e){e.unread&&(a+=1)}),t.unread=a,e(me(t))}).catch(function(t){return e(ue(t.message))})}));var a},logoutUser:function(){return e(function(e){return fetch(d+"users/logout?username=".concat(JSON.parse(localStorage.creds).username)).then(function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t},function(e){throw new Error(e.message)}).then(function(e){return e.json()}).then(function(t){e({type:"LOGOUT_REQUEST"}),localStorage.clear(),e({type:"LOGOUT_SUCCESS"}),window.location.reload()}).catch(function(e){return console.log(e)})})},fetchFavorites:function(t){return e(se(t))},postFavorite:function(t){return e(function(e){return function(t){if(localStorage.creds)return fetch(d+"users/add/like",{method:"POST",body:JSON.stringify({user:e[0],data:e[1]}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){"Already Liked"===t.message?alert("You already liked  ".concat(e[1],".")):(alert("We sent message to ".concat(e[1],". Lets see you would be liked!")),window.location.reload())}).catch(function(e){console.log(e)});alert("You need to log on first")}}(t))},checkNoti:function(t,a){return e(function(e,t){return function(a){return fetch(d+"noti/".concat(e),{method:"PUT",body:JSON.stringify({date:t}),headers:{"Content-Type":"application/json"}}).then(function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t},function(e){throw new Error(e.message)}).then(function(e){return e.json()}).then(function(e){console.log("fetchNoti response:"+JSON.stringify(e)),a(me(e))}).catch(function(e){return a(ue(e.message))})}}(t,a))},fetchUchat:function(t){return e(pe(t))},postDislike:function(t){return e(function(e){return fetch(d+"users/add/dislike?user=".concat(e[0],"&dislike=").concat(e[1])).then(function(e){return e.json()}).then(function(t){console.log("Dislike ",e),window.location.reload()}).catch(function(e){return console.log(e)})}(t))},fetchFilter:function(t){return e(function(e){return function(t,a){e.prefer=a().info.info.prefer,e.gps=a().info.info.gps,e.username=a().info.info.username,e.likelist=a().info.info.like,e.tags=a().info.info.tags,t(x.actions.change("filter",e))}}(t))}}})(Ee)),ye=(a(579),a(38)),be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,info:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_INFO":return Object(v.a)({},e,{isLoading:!1,errMess:null,info:t.payload});case"INFO_LOADING":return Object(v.a)({},e,{isLoading:!0,errMess:null,info:null});case"INFO_FAILED":return Object(v.a)({},e,{isLoading:!1,errMess:t.payload,info:null});default:return e}},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,noties:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NOTIES":return Object(v.a)({},e,{isLoading:!1,errMess:null,noties:t.payload});case"NOTIES_LOADING":return Object(v.a)({},e,{isLoading:!0,errMess:null,noties:null});case"NOTIES_FAILED":return Object(v.a)({},e,{isLoading:!1,errMess:t.payload});default:return e}},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,uchats:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_UCHAT":return Object(v.a)({},e,{isLoading:!1,errMess:null,uchats:t.payload});case"UCHAT_LOADING":return Object(v.a)({},e,{isLoading:!0,errMess:null,uchats:null});case"UCHAT_FAILED":return Object(v.a)({},e,{isLoading:!1,errMess:t.payload});default:return e}},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,profile:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PROFILE":return Object(v.a)({},e,{isLoading:!1,errMess:null,profile:t.payload});case"PROFILE_LOADING":return Object(v.a)({},e,{isLoading:!0,errMess:null,profile:null});case"PROFILE_FAILED":return Object(v.a)({},e,{isLoading:!1,errMess:t.payload,profile:null});default:return e}},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,favorites:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FAVORITES":return Object(v.a)({},e,{isLoading:!1,errMess:null,favorites:t.payload});case"FAVORITES_LOADING":return Object(v.a)({},e,{isLoading:!0,errMess:null,favorites:{}});case"FAVORITES_FAILED":return Object(v.a)({},e,{isLoading:!1,errMess:t.payload,favorites:{}});default:return e}},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,lusers:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_LUSERS":return Object(v.a)({},e,{isLoading:!1,errMess:null,lusers:t.payload});case"LUSERS_LOADING":return Object(v.a)({},e,{isLoading:!0,errMess:null,lusers:[]});case"LUSERS_FAILED":return Object(v.a)({},e,{isLoading:!1,errMess:t.payload,lusers:[]});default:return e}},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,isAuthenticated:!!localStorage.getItem("token"),token:localStorage.getItem("token"),user:localStorage.getItem("creds")?JSON.parse(localStorage.getItem("creds")):null,errMess:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":return Object(v.a)({},e,{isLoading:!0,isAuthenticated:!1,user:t.creds});case"LOGIN_SUCCESS":return Object(v.a)({},e,{isLoading:!1,isAuthenticated:!0,errMess:"",token:t.token});case"LOGIN_FAILURE":return Object(v.a)({},e,{isLoading:!1,isAuthenticated:!1,errMess:t.message});case"LOGOUT_REQUEST":return Object(v.a)({},e,{isLoading:!0,isAuthenticated:!0});case"LOGOUT_SUCCESS":return Object(v.a)({},e,{isLoading:!1,isAuthenticated:!1,token:"",user:null});default:return e}},Ce=a(256),xe=a.n(Ce),Le=a(257),Fe=a.n(Le),Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,users:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USERS":return Object(v.a)({},e,{isLoading:!1,errMess:null,users:t.payload});case"USERS_LOADING":return Object(v.a)({},e,{isLoading:!0,errMess:null,users:[]});case"USERS_FAILED":return Object(v.a)({},e,{isLoading:!1,errMess:t.payload,users:[]});default:return e}};a(230).config();var Me=Object(ye.createStore)(Object(ye.combineReducers)(Object(v.a)({profile:Ne,noties:Oe,uchats:ke,users:Ie,lusers:Se,info:be,auth:we,favorites:je},Object(x.createForms)({feedback:Z,filter:$}))),Object(ye.applyMiddleware)(xe.a,Fe.a)),Ae=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(Q.Provider,{store:Me},r.a.createElement(G.a,null,r.a.createElement("div",null,r.a.createElement(ve,null))))}}]),t}(n.Component),De=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Te(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(Ae,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("//match-client",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("//match-client","/service-worker.js");De?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Te(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Te(e)})}}()}},[[259,1,2]]]);
//# sourceMappingURL=main.997d91a5.chunk.js.map